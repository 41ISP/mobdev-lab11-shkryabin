{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\react-weather\\\\src\\\\pages\\\\home\\\\components\\\\Days\\\\Days.tsx\",\n  _s = $RefreshSig$();\n// pages/home/components/Days/Days.tsx\nimport React, { useState, useEffect } from \"react\";\nimport s from \"./Days.module.scss\";\nimport { Card } from \"./Card\";\nimport { Tabs } from \"./Tabs\";\nimport { fetchWeatherForecast } from \"../../../../services/weatherServices\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Days = ({\n  city,\n  onDayClick\n}) => {\n  _s();\n  const [forecast, setForecast] = useState(null);\n  const [days, setDays] = useState([]);\n  useEffect(() => {\n    const loadForecast = async () => {\n      try {\n        const forecastData = await fetchWeatherForecast(city);\n        setForecast(forecastData);\n        processForecastData(forecastData);\n      } catch (error) {\n        console.error(\"Error loading forecast:\", error);\n        // Заглушка на случай ошибки\n        setDays(getDefaultDays());\n      }\n    };\n    loadForecast();\n  }, [city]);\n  const processForecastData = forecastData => {\n    // Берем по одному прогнозу на день (на 12:00)\n    const dailyForecasts = forecastData.list.filter((item, index) => {\n      return index % 8 === 0; // Берем каждый 8-й элемент (каждые 24 часа)\n    }).slice(0, 7); // Берем максимум 7 дней\n\n    const processedDays = dailyForecasts.map((forecastItem, index) => {\n      const date = new Date(forecastItem.dt * 1000);\n      const dayNames = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];\n      const monthNames = ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];\n      const dayName = index === 0 ? 'Сегодня' : index === 1 ? 'Завтра' : dayNames[date.getDay()];\n      const dayInfo = `${date.getDate()} ${monthNames[date.getMonth()]}`;\n      return {\n        day: dayName,\n        day_info: dayInfo,\n        icon_id: getWeatherIcon(forecastItem.weather[0].icon),\n        temp_day: `${Math.round(forecastItem.main.temp)}°`,\n        temp_night: `${Math.round(forecastItem.main.temp - 3)}°`,\n        // Простая логика для ночной температуры\n        info: forecastItem.weather[0].description,\n        forecastItem: forecastItem\n      };\n    });\n    setDays(processedDays);\n  };\n  const getWeatherIcon = iconCode => {\n    const iconMap = {\n      '01d': 'sun',\n      '01n': 'moon',\n      '02d': 'small_sun',\n      '02n': 'small_moon',\n      '03d': 'mainly_cloudy',\n      '03n': 'mainly_cloudy',\n      '04d': 'mainly_cloudy',\n      '04n': 'mainly_cloudy',\n      '09d': 'rain',\n      '09n': 'rain',\n      '10d': 'small_rain_sun',\n      '10n': 'small_rain_moon',\n      '11d': 'lightning',\n      '11n': 'lightning',\n      '13d': 'snow',\n      '13n': 'snow',\n      '50d': 'fog',\n      '50n': 'fog'\n    };\n    return iconMap[iconCode] || 'small_sun';\n  };\n  const getDefaultDays = () => {\n    return [{\n      day: 'Сегодня',\n      day_info: '28 авг',\n      icon_id: 'small_sun',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'Облачно'\n    }, {\n      day: 'Завтра',\n      day_info: '29 авг',\n      icon_id: 'small_rain_sun',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'небольшой дождь и солнце'\n    }, {\n      day: 'Ср',\n      day_info: '30 авг',\n      icon_id: 'small_rain',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'небольшой дождь'\n    }, {\n      day: 'Чт',\n      day_info: '31 авг',\n      icon_id: 'mainly_cloudy',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'Облачно'\n    }, {\n      day: 'Пт',\n      day_info: '1 сен',\n      icon_id: 'rain',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'Облачно'\n    }, {\n      day: 'Сб',\n      day_info: '2 сен',\n      icon_id: 'small_sun',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'Облачно'\n    }, {\n      day: 'Вс',\n      day_info: '3 сен',\n      icon_id: 'small_sun',\n      temp_day: '+18',\n      temp_night: '+15',\n      info: 'Облачно'\n    }];\n  };\n  const handleCardClick = day => {\n    if (day.forecastItem) {\n      onDayClick(day.forecastItem);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Tabs, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.days,\n      children: days.map((day, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => handleCardClick(day),\n        style: {\n          cursor: 'pointer'\n        },\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          day: day\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Days, \"0o8P6vmXPXunAbYUFBCmC8FbcAQ=\");\n_c = Days;\nexport default Days;\nvar _c;\n$RefreshReg$(_c, \"Days\");","map":{"version":3,"names":["React","useState","useEffect","s","Card","Tabs","fetchWeatherForecast","jsxDEV","_jsxDEV","Fragment","_Fragment","Days","city","onDayClick","_s","forecast","setForecast","days","setDays","loadForecast","forecastData","processForecastData","error","console","getDefaultDays","dailyForecasts","list","filter","item","index","slice","processedDays","map","forecastItem","date","Date","dt","dayNames","monthNames","dayName","getDay","dayInfo","getDate","getMonth","day","day_info","icon_id","getWeatherIcon","weather","icon","temp_day","Math","round","main","temp","temp_night","info","description","iconCode","iconMap","handleCardClick","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","style","cursor","_c","$RefreshReg$"],"sources":["D:/code/react-weather/src/pages/home/components/Days/Days.tsx"],"sourcesContent":["// pages/home/components/Days/Days.tsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport s from \"./Days.module.scss\";\r\nimport { Card } from \"./Card\";\r\nimport { Tabs } from \"./Tabs\";\r\nimport { ForecastData, ForecastItem, fetchWeatherForecast } from \"../../../../services/weatherServices\";\r\n\r\ninterface Props {\r\n  city: string;\r\n  onDayClick: (forecastItem: ForecastItem) => void;\r\n}\r\n\r\nexport interface Day {\r\n  day: string;\r\n  day_info: string;\r\n  icon_id: string;\r\n  temp_day: string;\r\n  temp_night: string;\r\n  info: string;\r\n  forecastItem?: ForecastItem;\r\n}\r\n\r\nexport const Days: React.FC<Props> = ({ city, onDayClick }) => {\r\n  const [forecast, setForecast] = useState<ForecastData | null>(null);\r\n  const [days, setDays] = useState<Day[]>([]);\r\n\r\n  useEffect(() => {\r\n    const loadForecast = async () => {\r\n      try {\r\n        const forecastData = await fetchWeatherForecast(city);\r\n        setForecast(forecastData);\r\n        processForecastData(forecastData);\r\n      } catch (error) {\r\n        console.error(\"Error loading forecast:\", error);\r\n        // Заглушка на случай ошибки\r\n        setDays(getDefaultDays());\r\n      }\r\n    };\r\n\r\n    loadForecast();\r\n  }, [city]);\r\n\r\n  const processForecastData = (forecastData: ForecastData) => {\r\n    // Берем по одному прогнозу на день (на 12:00)\r\n    const dailyForecasts = forecastData.list.filter((item, index) => {\r\n      return index % 8 === 0; // Берем каждый 8-й элемент (каждые 24 часа)\r\n    }).slice(0, 7); // Берем максимум 7 дней\r\n\r\n    const processedDays: Day[] = dailyForecasts.map((forecastItem, index) => {\r\n      const date = new Date(forecastItem.dt * 1000);\r\n      const dayNames = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];\r\n      const monthNames = ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];\r\n      \r\n      const dayName = index === 0 ? 'Сегодня' : \r\n                     index === 1 ? 'Завтра' : \r\n                     dayNames[date.getDay()];\r\n      \r\n      const dayInfo = `${date.getDate()} ${monthNames[date.getMonth()]}`;\r\n\r\n      return {\r\n        day: dayName,\r\n        day_info: dayInfo,\r\n        icon_id: getWeatherIcon(forecastItem.weather[0].icon),\r\n        temp_day: `${Math.round(forecastItem.main.temp)}°`,\r\n        temp_night: `${Math.round(forecastItem.main.temp - 3)}°`, // Простая логика для ночной температуры\r\n        info: forecastItem.weather[0].description,\r\n        forecastItem: forecastItem\r\n      };\r\n    });\r\n\r\n    setDays(processedDays);\r\n  };\r\n\r\n  const getWeatherIcon = (iconCode: string) => {\r\n    const iconMap: { [key: string]: string } = {\r\n      '01d': 'sun',\r\n      '01n': 'moon',\r\n      '02d': 'small_sun',\r\n      '02n': 'small_moon',\r\n      '03d': 'mainly_cloudy',\r\n      '03n': 'mainly_cloudy',\r\n      '04d': 'mainly_cloudy',\r\n      '04n': 'mainly_cloudy',\r\n      '09d': 'rain',\r\n      '09n': 'rain',\r\n      '10d': 'small_rain_sun',\r\n      '10n': 'small_rain_moon',\r\n      '11d': 'lightning',\r\n      '11n': 'lightning',\r\n      '13d': 'snow',\r\n      '13n': 'snow',\r\n      '50d': 'fog',\r\n      '50n': 'fog'\r\n    };\r\n    return iconMap[iconCode] || 'small_sun';\r\n  };\r\n\r\n  const getDefaultDays = (): Day[] => {\r\n    return [\r\n      {\r\n        day: 'Сегодня',\r\n        day_info: '28 авг',\r\n        icon_id: 'small_sun',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'Облачно',\r\n      },\r\n      {\r\n        day: 'Завтра',\r\n        day_info: '29 авг',\r\n        icon_id: 'small_rain_sun',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'небольшой дождь и солнце',\r\n      },\r\n      {\r\n        day: 'Ср',\r\n        day_info: '30 авг',\r\n        icon_id: 'small_rain',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'небольшой дождь',\r\n      },\r\n      {\r\n        day: 'Чт',\r\n        day_info: '31 авг',\r\n        icon_id: 'mainly_cloudy',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'Облачно',\r\n      },\r\n      {\r\n        day: 'Пт',\r\n        day_info: '1 сен',\r\n        icon_id: 'rain',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'Облачно',\r\n      },\r\n      {\r\n        day: 'Сб',\r\n        day_info: '2 сен',\r\n        icon_id: 'small_sun',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'Облачно',\r\n      },\r\n      {\r\n        day: 'Вс',\r\n        day_info: '3 сен',\r\n        icon_id: 'small_sun',\r\n        temp_day: '+18',\r\n        temp_night: '+15',\r\n        info: 'Облачно',\r\n      },\r\n    ];\r\n  };\r\n\r\n  const handleCardClick = (day: Day) => {\r\n    if (day.forecastItem) {\r\n      onDayClick(day.forecastItem);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tabs />\r\n      <div className={s.days}>\r\n        {days.map((day: Day, index) => (\r\n          <div key={index} onClick={() => handleCardClick(day)} style={{ cursor: 'pointer' }}>\r\n            <Card day={day} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Days;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}